 import { transliterate } from 'transliteration'; // ูุฑุถ ุจุฑ ุงู ุงุณุช ฺฉู ุงู ฺฉุชุงุจุฎุงูู ุจู ุฎูุจ ูุงุฑุณ ุฑุง ุจู ูุงุชู ุชุจุฏู ูโฺฉูุฏ

export const makeSlug = (text: string) => {
  if (!text) return "";

  const trimmed = text.trim();

  // ูุฑุญูู ฑ: ุชุจุฏู ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ุจู ุงูฺฏูุณ (ูุงุชู) ูุงุจูโุฎูุงูุฏู
  // ูุฑุถ ุจุฑ ุงู ุงุณุช ฺฉู `transliterate` ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ุฑุง ุจู ูุนุงุฏู ูุงุชูุดุงู ุชุจุฏู ูโฺฉูุฏ
  const latinizedText = transliterate(trimmed);

  // ูุฑุญูู ฒ: ุชุจุฏู ุจู ุญุฑูู ฺฉูฺฺฉุ ุฌุงฺฏุฒู ฺฉุงุฑุงฺฉุชุฑูุง ุบุฑูุฌุงุฒ ุจุง ุฎุท ุชุฑู
  // ู ุญุฐู ุฎุท ุชุฑูโูุง ุชฺฉุฑุงุฑ ุง ุฏุฑ ุงุจุชุฏุง/ุงูุชูุง
  const slug = latinizedText
    .toLowerCase() // ููู ุญุฑูู ุฑุง ฺฉูฺฺฉ ูโฺฉูุฏ
    .replace(/[^a-z0-9 -]/g, "") // ๐ ุงูุฌุง ููุท ุญุฑูู ุงูฺฏูุณุ ุงุนุฏุงุฏุ ูุงุตูู ู ุฎุท ุชุฑู ูุฌุงุฒ ุงุณุช
    .replace(/\s+/g, "-") // ูุงุตููโูุง ุฑุง ุจุง ฺฉ ุฎุท ุชุฑู ุฌุงฺฏุฒู ูโฺฉูุฏ
    .replace(/-+/g, "-") // ุฎุทโุชุฑูโูุง ุชฺฉุฑุงุฑ ุฑุง ุจู ฺฉ ุฎุท ุชุฑู ุชุจุฏู ูโฺฉูุฏ
    .replace(/^-/, "") // ุฎุท ุชุฑู ุงุฒ ุงุจุชุฏุง ุฑุดุชู ุฑุง ุญุฐู ูโฺฉูุฏ
    .replace(/-$/, ""); // ุฎุท ุชุฑู ุงุฒ ุงูุชูุง ุฑุดุชู ุฑุง ุญุฐู ูโฺฉูุฏ

  return slug;
};
